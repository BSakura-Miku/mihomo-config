# å¿…è¯»ï¼ï¼ï¼
# å¸¦ğŸ”´æ ‡è®°çš„é…ç½®é¡¹ä¸ºä¸€èˆ¬ä»£ç†è½¯ä»¶å¼ºåˆ¶è¦†å†™çš„é¡¹ç›®ï¼Œéœ€è¦åœ¨ä»£ç†è½¯ä»¶é…ç½®ç›¸åº”é¡¹ç›®
# æ³¨æ„æ··å…¥é…ç½®ä¸­çš„è®¾ç½®ä¼šè¦†ç›–yamlè®¾ç½®
# æ³¨æ„è§„åˆ™åœ¨æ»¡è¶³è‡ªå·±éœ€æ±‚æƒ…å†µä¸‹ï¼Œå°½é‡åšåˆ°ç²¾ç®€ï¼Œä¸è¦è¿‡åº¦å¤æ‚ï¼Œä»¥å…å½±å“æ€§èƒ½ã€‚
# è·‘è£¸æ ¸ç”¨æˆ·è¯·è‡ªè¡Œå»æ‰ä¸‹æ–¹æ§åˆ¶é¢æ¿æ¨¡å—çš„æ³¨é‡Šã€‚
# ä½œè€…: BSakura
# Ver.3.8 ä¿®æ”¹æ—¶é—´: 2025-08-16 ä¿®æ”¹éƒ¨åˆ†rules å¦‚OneDriveï¼Œ æ›´æ–°tunè®¾ç½®
# æè¿°: Clash é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ä»£ç†è®¢é˜…ä¸è§„åˆ™è®¾ç½®
# å‚è€ƒ
# https://github.com/refined-fish/clash_rule_fish
# https://github.com/liandu2024/clash
# https://github.com/Loyalsoldier/v2ray-rules-dat
# https://github.com/qichiyuhub/rule
# https://github.com/Coldvvater/Mononoke

# æœºåœºè®¢é˜…

proxy-providers-general: &proxy-providers-general         # ä»£ç†æä¾›è€…é€šç”¨é…ç½®
  type: http                                              # ç±»å‹ï¼Œå¯é€‰http/file/inline
  interval: 86400                                         # æ›´æ–°é—´éš”ï¼Œå•ä½ç§’
  proxy: DIRECT                                           # httpç±»å‹æ›´æ–°æ—¶ä½¿ç”¨çš„ä»£ç†ç»„ï¼Œä¸å»ºè®®è®¾ç½®ä»£ç†ï¼Œå¦‚æœä½ çš„æœºåœºéœ€è¦ä»£ç†æ‰èƒ½è®¢é˜…ï¼Œé‚£å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹ï¼Ÿ
  size-limit: 0                                           # æ–‡ä»¶å¤§å°é™åˆ¶ï¼Œ0ä¸ºä¸é™åˆ¶
  # xclude-filter: '(?i)å®˜ç½‘|æ¯æœˆåˆ·æ–°è®¢é˜…|æœºåœº|åˆ°æœŸ|https://|å‰©ä½™æµé‡'
  override:
    tfo: false                                            # å¯ç”¨TCP Fast Openï¼Œä¸€èˆ¬éƒ½ä¸æ”¯æŒ
    mptcp: false                                          # å¯ç”¨TCP Multi Pathï¼Œä¸€èˆ¬éƒ½ä¸æ”¯æŒ
    udp: true                                             # å¯ç”¨UDP
    udp-over-tcp: false                                   # å¯ç”¨UDP over TCP
    skip-cert-verify: false                               # è·³è¿‡è¯ä¹¦éªŒè¯
    # down: '50 Mbps'                                     # ä¸‹è¡Œé™é€Ÿ
    # up: '10 Mbps'                                       # ä¸Šè¡Œé™é€Ÿ
    ip-version: dual                                      # å¯é€‰dual/ipv4/ipv6/ipv4-prefer/ipv6-preferï¼Œå³ä¼˜å…ˆv4æˆ–v6ï¼Œä»…v4æˆ–v6

# ä»£ç†æä¾›è€…è®¾ç½®
proxy-providers:
  æœºåœºåç§°:
    <<: *proxy-providers-general                          # å¼•ç”¨ä¸Šæ–‡çš„yamlé”šç‚¹
    url: 'è®¢é˜…é“¾æ¥'
    override:                                             # å¯é€‰ï¼Œè¦†å†™è®¾ç½®
      additional-prefix: 'ik|'                            # å¯é€‰ï¼Œç»™è®¢é˜…æ·»åŠ å‰ç¼€
    #path: ./providers/proxy/proxy-provider1.yaml         # å¯é€‰ï¼ŒæŒ‡å®šä¸‹è½½è·¯å¾„
  # provider2:

# ä»£ç†ç»„è®¾ç½®
use-all-proxy-providers: &use-all-proxy-providers         # ä»£ç†ç»„é€šç”¨é…ç½®
  use:
    - æœºåœºåç§°
    # - provider2:

# èŠ‚ç‚¹ä¿¡æ¯
proxies:                                                  # å•ä¸ªèŠ‚ç‚¹è®¾ç½® å‚è€ƒâ€˜https://wiki.metacubex.one/config/â€™

# å…¥ç«™ç«¯å£é…ç½® 
port: 7890                                                # HTTP(S) ä»£ç†æœåŠ¡å™¨ç«¯å£
socks-port: 7891                                          # SOCKS5 ä»£ç†ç«¯å£
redir-port: 7892                                          # ğŸ”´élinuxç³»ç»Ÿæ— æ•ˆï¼Œredir é€æ˜ä»£ç†ç«¯å£
mixed-port: 7893                                          # HTTP+Socks4æ··åˆï¼ŒWinä¸‹çš„ç³»ç»Ÿä»£ç†ç«¯å£
tproxy-port: 7894                                         # ğŸ”´élinuxç³»ç»Ÿæ— æ•ˆï¼Œtproxy é€æ˜ä»£ç†ç«¯å£

# å…¨å±€é…ç½® 
mode: rule                                                # ruleï¼ˆè§„åˆ™ï¼‰/ globalï¼ˆå…¨å±€ï¼‰/ directï¼ˆç›´è¿ï¼‰
log-level: warning                                        # è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (5 ä¸ªçº§åˆ«ï¼šsilent / error / warning / info / debugï¼‰
allow-lan: true                                           # å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå…±äº«ä»£ç†ï¼‰
bind-address: '*'                                         # ç›‘å¬IPç™½åå•ï¼Œå¯ç»‘å®šå•ä¸ªIPv4å’Œv6åœ°å€ï¼Œ'*' ä¸ºç»‘å®šæ‰€æœ‰IPåœ°å€ï¼Œä»…åœ¨å°†allow-lanè®¾ç½®ä¸ºtrueæ—¶é€‚ç”¨
ipv6: true                                                # å¼€å¯ IPv6 æ€»å¼€å…³ï¼Œå…³é—­é˜»æ–­æ‰€æœ‰ IPv6 é“¾æ¥å’Œå±è”½ DNS è¯·æ±‚ AAAA è®°å½•
# udp: true                                               # æ˜¯å¦å…è®¸ UDP é€šè¿‡ä»£ç†ï¼Œé»˜è®¤ä¸º false

unified-delay: true                                       # å¼€å¯ç»Ÿä¸€å»¶è¿Ÿæ—¶ï¼Œä¼šè¿›è¡Œä¸¤æ¬¡å»¶è¿Ÿæµ‹è¯•ï¼Œä»¥æ¶ˆé™¤è¿æ¥æ¡æ‰‹ç­‰å¸¦æ¥çš„ä¸åŒç±»å‹èŠ‚ç‚¹çš„å»¶è¿Ÿå·®å¼‚ï¼Œå¯é€‰å€¼ true/false
tcp-concurrent: true                                      # TCP å¹¶å‘ï¼Œå¯é€‰å€¼ true/false
find-process-mode: 'off'                                  # è¿›ç¨‹åŒ¹é…ï¼ˆoff:å…³é—­ï¼Œalwas:å¼€å¯ï¼Œstrictè‡ªåŠ¨ï¼‰ï¼Œtunæ¨¡å¼ä¸‹æ— æ•ˆ

# å¤–éƒ¨èµ„æºä¸‹è½½è®¾ç½®
global-client-fingerprint: chrome                         # å…¨å±€ TLS æŒ‡çº¹ï¼Œä¼˜å…ˆä½äº proxy å†…çš„ client-fingerprintï¼Œç›®å‰æ”¯æŒå¼€å¯ TLS ä¼ è¾“çš„ TCP/grpc/WS/HTTP , æ”¯æŒåè®®æœ‰ VLESS,Vmess å’Œ trojan
global-ua: mihomo                                         # å…¨å±€UAï¼Œé»˜è®¤ä¸ºclash.meta
etag-support: true                                        # èµ„æºä¸‹è½½çš„ ETag æ”¯æŒ
geodata-mode: false                                       # GEOIPæ•°æ®æ¨¡å¼ï¼Œfalse:mmdbï¼Œtrue:datï¼Œmmdbæ›´æ–°ä½†æœ‰è®¾å¤‡ä¸æ”¯æŒ
geodata-loader: standard                                  # GEOæ–‡ä»¶åŠ è½½æ¨¡å¼ï¼Œé»˜è®¤memconservativeï¼ˆå°å†…å­˜è®¾å¤‡æ¨¡å¼ï¼Œå³åˆ†æ®µåŠ è½½geoæ•°æ®è€Œä¸æ˜¯å…¨éƒ¨åŠ è½½ï¼‰
geo-auto-update: true                                     # GEOæ–‡ä»¶è‡ªåŠ¨æ›´æ–°
geo-update-interval: 24                                   # æ›´æ–°é—´éš”ï¼Œå°æ—¶
geox-url:                                                 # GEOæ•°æ®åº“ä¸‹è½½åœ°å€ï¼Œå†…æ ¸ä¼šæŒ‰éœ€ä¸‹è½½ï¼Œæœªè¢«ä½¿ç”¨çš„æ•°æ®åº“ä¸ä¼šè¢«ä¸‹è½½
  geoip: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat'
  geosite: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat'
  mmdb: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb'
  asn: 'https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/GeoLite2-ASN.mmdb'

# TCP-KeepA-liveé…ç½®
keep-alive-idle: 30                                       # è§¦å‘å¿ƒè·³åŒ…çš„é“¾è·¯æ— æ´»åŠ¨é˜ˆå€¼ï¼Œæ— æ´»åŠ¨åå‘é€å¿ƒè·³åŒ…æ£€æµ‹å¯¹ç«¯æ˜¯å¦å­˜æ´»
keep-alive-interval: 30                                   # å‘é€å¿ƒè·³åŒ…çš„é—´éš”ï¼Œæ— å›åº”åˆ™æœ€å¤šé‡å‘9æ¬¡ååˆ¤æ–­é“¾è·¯å…³é—­
disable-keep-alive: false                                 # ç¦ç”¨ keep aliveï¼Œå³å…è®¸é•¿é“¾æ¥ä¸€ç›´å­˜åœ¨ï¼Œç›®å‰å®‰å“ç«¯å¼ºåˆ¶true

# ç¼“å­˜è®¾ç½®
profile:
  store-selected: true                                    # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-fake-ip: true                                     # å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€

# APIé¢æ¿è®¾ç½®
external-controller: 0.0.0.0:9090                         # ğŸ”´å¤–éƒ¨æ§åˆ¶å™¨ï¼Œå¯ä»¥ä½¿ç”¨ RESTful API æ¥æ§åˆ¶ä½ çš„ Clash å†…æ ¸ï¼ŒAPI ç›‘å¬åœ°å€ï¼Œä½ å¯ä»¥å°† 127.0.0.1 ä¿®æ”¹ä¸º 0.0.0.0 æ¥ç›‘å¬æ‰€æœ‰ IP
secret: 'hd54RIm0LiUpyu'                                  # ğŸ”´APIé¢æ¿è®¿é—®å¯†é’¥
external-ui: ./ui                                         # ğŸ”´å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æº (æ¯”å¦‚ Clash-dashboard) è¿è¡Œåœ¨ Clash API, è·¯å¾„ä¸º API åœ°å€/uiï¼Œå¯ä»¥ä¸ºç»å¯¹è·¯å¾„ï¼Œæˆ–è€… Clash å·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„
external-ui-name: zashboard                               # APIé¢æ¿åï¼Œé…åˆè·¯å¾„æ‹¼æ¥æˆè·¯å¾„ï¼Œä¾‹å¦‚/ui/metacubexd
external-ui-url: 'https://ghfast.top/https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip' 
                                                          # APIé¢æ¿ä¸‹è½½åœ°å€

# å—…æ¢
sniffer:                                                  # å—…æ¢ï¼Œè·å–SNIä¸­çš„åŸŸåï¼Œä½¿mihomoèƒ½å¤Ÿåè§£æœªç»è‡ªå·±DNSçš„IPè¯·æ±‚çš„åŸŸåï¼Œæ¥åŒ¹é…åŸŸåè§„åˆ™
  enable: true                                            # å¯ç”¨sniffer
  force-dns-mapping: true                                 # å¯¹redir-hostç±»å‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  parse-pure-ip: true                                     # å¯¹æ‰€æœ‰æœªè·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  override-destination: true                              # æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®ï¼Œé»˜è®¤ä¸º true
  sniff:                                                  # éœ€è¦å—…æ¢çš„åè®®ç±»å‹ï¼Œä»…æ”¯æŒ HTTP/TLS/QUIC
    HTTP:
      ports: [80, 8080-8880]                              # ç«¯å£ç™½åå•ï¼Œåªé’ˆå¯¹ä¸‹åˆ—ç«¯å£å—…æ¢
      override-destination: true                          # override-destinationå­—æ®µï¼ˆå¯é€‰ï¼‰ï¼Œç”¨äºè¦†ç›–å…¨å±€override-destinationè®¾ç½®
    TLS:
      ports: [443, 8443]                                  # ç«¯å£ç™½åå•ï¼Œåªé’ˆå¯¹ä¸‹åˆ—ç«¯å£å—…æ¢
    QUIC:
      ports: [443, 8443]                                  # ç«¯å£ç™½åå•ï¼Œåªé’ˆå¯¹ä¸‹åˆ—ç«¯å£å—…æ¢
  force-domain:                                           # éœ€è¦å¼ºåˆ¶å—…æ¢çš„åŸŸåï¼ˆé»˜è®¤æƒ…å†µä¸‹åªå¯¹IPè¿›è¡Œå—…æ¢ï¼‰
    - '+.youtube.com'
    - '+.netflix.com'
    - '+.nflxvideo.net'
    - '+.amazonaws.com'
    - '+.media.dssott.com'
    - '+.v2ex.com'
    - '+.speedtest.net'
    - '+.speedtest.com'
  skip-domain:                                            # éœ€è¦è·³è¿‡å—…æ¢çš„åŸŸåï¼Œä¸»è¦è§£å†³éƒ¨åˆ†ç«™ç‚¹sniå­—æ®µéåŸŸåï¼Œå¯¼è‡´å—…æ¢ç»“æœå¼‚å¸¸çš„é—®é¢˜ï¼Œå¦‚ç±³å®¶è®¾å¤‡
    - '+.baidu.com'
    - '+.apple.com'
    - Mijia Cloud
    - dlg.io.mi.com
    - '+.oray.com'
    - '+.sunlogin.net'
    - geosite:cn
  # skip-src-address: 
                                                          # éœ€è¦è·³è¿‡å—…æ¢çš„æºåœ°å€
  # skip-dst-address: 
                                                          # éœ€è¦è·³è¿‡å—…æ¢çš„ç›®çš„åœ°å€

# å…¥ç«™
tun:
  enable: true                                            # ğŸ”´å¯ç”¨Tunæ¥å£
  stack: mixed                                            # TUN å †æ ˆæ¨¡å¼,å»ºè®® mixedï¼ˆTCPï¼šsystemï¼ŒUDPï¼šGvisorï¼‰ï¼Œå¯¹äºWindowså¼€å¯é˜²ç«å¢™åéœ€è¦æ‰‹åŠ¨æ”¾è¡Œå†…æ ¸ï¼Œå¦åˆ™åªèƒ½ä½¿ç”¨Gvisor
  dns-hijack: ['any:53', 'tcp://any:53']                  # dns åŠ«æŒï¼Œå°†åŒ¹é…åˆ°çš„è¿æ¥å¯¼å…¥å†…éƒ¨ dns æ¨¡å—ï¼Œä¸ä¹¦å†™åè®®åˆ™é»˜è®¤ udp://
  auto-route: true                                        # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œè‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿› tun
  auto-redirect: true                                     # å¤„ç†â€œè·³è½¬åçš„æµé‡â€ï¼Œé˜²æ­¢ä¸€äº› 302/307 é‡å®šå‘è¯·æ±‚ ç»•è¿‡ä»£ç† æˆ– å¤±è´¥
  auto-detect-interface: true                             # è‡ªåŠ¨é€‰æ‹©æµé‡çš„å‡ºæ¥å£ï¼ˆé»˜è®¤wanå£ï¼‰
  mtu: 9000                                               # MTU
  device: nikki                                           # æŒ‡å®š tun ç½‘å¡åç§°ï¼ŒMacOS è®¾å¤‡åªèƒ½ä½¿ç”¨ utun å¼€å¤´çš„ç½‘å¡å
  # gso: true                                             # é€šç”¨åˆ†æ®µå¸è½½ï¼Œä»…æ”¯æŒLinuxï¼Œæé«˜æ€§èƒ½                                                                  
  # gso-max-size: 65536                                   # é€šç”¨åˆ†æ®µå¸è½½åŒ…çš„æœ€å¤§é•¿åº¦                      
  # exclude-package:                                      # æ’é™¤çš„åŒ…å                
  # auto-redirect: true                                   # ä»…Linuxæœ‰æ•ˆï¼Œè‡ªåŠ¨é…ç½® iptables/nftables ä»¥é‡å®šå‘ TCP è¿æ¥ï¼Œéœ€è¦auto-route: true                    
  # strict-route: false                                   # å°†æ‰€æœ‰è¿æ¥è·¯ç”±åˆ° tun æ¥é˜²æ­¢æ³„æ¼ï¼Œä½†ä½ çš„è®¾å¤‡å°†æ— æ³•å…¶ä»–è®¾å¤‡è¢«è®¿é—®ï¼Œä¸¥é‡æ‹–æ…¢Windowsè®¿é—®é€Ÿåº¦ï¼Œå¯èƒ½é€ æˆè™šæ‹Ÿæœºè¿è¡Œå¼‚å¸¸                    
  # endpoint-independent-nat: false                       # ç‹¬ç«‹äºç«¯ç‚¹çš„ NATï¼Œæ€§èƒ½å¯èƒ½ä¸‹é™ï¼Œä¸å»ºè®®ä¸éœ€è¦æ—¶å¼€å¯                              
  # route-exclude-address-set:                            # å°†æŒ‡å®šè§„åˆ™é›†ä¸­çš„ç›®æ ‡ IP CIDR è§„åˆ™æ·»åŠ åˆ°é˜²ç«å¢™ï¼ŒåŒ¹é…çš„æµé‡å°†ç»•è¿‡è·¯ç”± ä»…æ”¯æŒ Linuxï¼Œä¸”éœ€è¦ nftables ä»¥åŠauto-route å’Œ auto-redirect å·²å¯ç”¨
  #   - 'RULE_SET:cn_ip'                                  # ç»•è¿‡ä¸­å›½å¤§é™†ip guiä¸­å¯è®¾ç½® ä»£ç†é…ç½®/ç»•è¿‡
  
# DNSæ¨¡å—
# fakeipä¸‹çš„DNSè®¾ç½®
# å®¢æˆ·ç«¯å‘èµ·ç½‘å€Açš„DNSï¼Œåˆ°è¾¾mihomoçš„DNSæ¨¡å—ï¼Œmihomoä¼šä½¿ç”¨ä¸‹æ–¹çš„é…ç½®è¿›è¡ŒDNS
# å½“fakeipä¸ºé»‘åå•æ¨¡å¼æ—¶ï¼ŒæœªåŒ¹é…åˆ°filterçš„åŸŸåå°†ç›´æ¥è¿”å›fakeip
# åŒ¹é…åˆ°fakeipçš„åŸŸåå°†ä¼šä½¿ç”¨redir-hostæ¨¡å¼è¿›è¡Œå¸¸è§„è§£æï¼Œå¾—åˆ°IPåè¿”å›ç»™å®¢æˆ·ç«¯
# å®¢æˆ·ç«¯æ‹¿åˆ°IPåï¼Œå†æ¬¡å¯¹IPå‘èµ·è¿æ¥è¯·æ±‚ï¼Œæ­¤æ—¶è¯·æ±‚ä¼šè¿›å…¥mihomoçš„è§„åˆ™åŒ¹é…ï¼Œæ ¹æ®åŒ¹é…ç»“æœç›´è¿æˆ–è€…è¿œç«¯è§£æ
# ä¹Ÿå°±æ˜¯è¯´DNSè§£æå®é™…ä¸Šä¼šå‘ç”Ÿä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡çš„ç»“æœå¹¶ä¸é‡è¦ï¼Œç¬¬äºŒæ¬¡åªè¦è§„åˆ™æ­£ç¡®è§¦å‘è¿œç¨‹è§£æï¼Œç»ä¸ä¼šæ±¡æŸ“å’ŒåŠ«æŒ
# ä½†å¦‚æœç¬¬ä¸€æ¬¡æ‹¿åˆ°äº†0.0.0.0,127.0.0.1è¿™æ ·çš„é”™è¯¯IPï¼Œè¯·æ±‚æ— æ³•å‘ç»™mihomoå°±ä¼šæ— æ³•è®¿é—®
# ç»¼ä¸Šæ‰€è¿°ï¼Œé…ç½®DNSæ²¡æœ‰é‚£ä¹ˆé‡è¦ï¼Œåªè¦ä¿è¯é¦–æ¬¡è§£æä¸è¦å¾—åˆ°0.0.0.0è¿™æ ·çš„é”™è¯¯IPå³å¯
# ä½†æ˜¯å¦‚æœä¸€å®šè¦è¦æ±‚è®¿é—®å›½å¤–åŸŸåDNSæ— æ³„æ¼ï¼Œæˆ–è€…éœ€è¦å¯¹å›½å¤–è¿›è¡Œåˆ†æµï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨fakeipæ¨¡å¼
# å› ä¸ºfakeipæ¨¡å¼ä¸‹ï¼Œå›½å¤–åŸŸåå…¨éƒ¨æ˜¯fakeipå¹¶æœªè¿›è¡Œæœ¬åœ°è§£æï¼Œè€Œä¸”å›½å¤–åŸŸåå†…ç½‘å…¨éƒ¨ä½¿ç”¨fakeipæ®µï¼Œæ–¹ä¾¿åˆ†æµ

dns:
  enable: true                                            # ğŸ”´å¯ç”¨dnsæ¨¡å—ï¼Œå¦åˆ™é‡‡ç”¨ç³»ç»ŸDNS
  cache-algorithm: lru                                    # DNSç¼“å­˜ç®—æ³•ï¼Œlruï¼ˆé»˜è®¤ï¼‰ç­–ç•¥å°½å¯èƒ½ç¼“å­˜æ›´å¤šæ¡ç›®ï¼Œarcç­–ç•¥åˆ™æ˜¯åŠ¨æ€è°ƒæ•´ç¼“å­˜
  prefer-h3: true                                         # DoHè‹¥æ”¯æŒåˆ™ä¼˜å…ˆä½¿ç”¨HTTP/3 proxy-server-nameserver éç©ºæ—¶å¯å¼€å¯ï¼Œä¸”ä¸å»ºè®®ä¸ prefer-h3 ä¸€èµ·ä½¿ç”¨
  respect-rules: false                                    # DNSè¯·æ±‚éµå¾ªè·¯ç”±è§„åˆ™ï¼Œéœ€å…ˆé…ç½®å¥½ proxy-server-nameserverï¼Œå¦åˆ™å‡ºç°é¸¡è›‹é—®é¢˜
  listen: 0.0.0.0:1053                                    # ğŸ”´DNSç›‘å¬ç«¯å£ï¼Œä»…æ”¯æŒudp
  ipv6: true                                              # æ˜¯å¦è§£æipv6åœ°å€ï¼Œå¦åˆ™è¿”å›ç©ºç»“æœ
  enhanced-mode: fake-ip                                  # ğŸ”´DNSå¤„ç†æ¨¡å¼ï¼šredir-host/fake-ipï¼Œfake-ipæ›´å¿«ä½†å¯èƒ½å¼•å…¥é—®é¢˜ï¼ˆç¼“å­˜fakeipåæ— æ³•æ•…éšœåˆ‡æ¢ï¼‰

  # fakeipé…ç½®æ®µ
  fake-ip-range: 198.18.0.0/15                            #ğŸ”´fakeip çš„ IP æ®µï¼Œtunæ¥å£çš„é»˜è®¤ IPV4 åœ°å€ ä¹Ÿä½¿ç”¨æ­¤å€¼ä½œä¸ºå‚è€ƒ
  fake-ip-filter-mode: blacklist                          # é»‘/ç™½åå•æ¨¡å¼ï¼Œé»‘åå•ä¸‹ï¼Œfilterå†…å®¹å°†ä½¿ç”¨redir-hostæ¨¡å¼è§£æ
  fake-ip-filter:                                         # fakeipè¿‡æ»¤ï¼Œä»¥ä¸‹åŸŸåå°†ä½¿ç”¨redir-hostæ¨¡å¼ï¼Œå¡«å…¥æ— éœ€ä»£ç†çš„å†…å®¹
    - 'RULE-SET,private_domain,cn_domain'                 # ç›´è¿åŸŸåé›†
    - 'RULE_SET,anti-ad_domain'                           # å¹¿å‘ŠåŸŸå
    - 'GEOSITE:category-ads-all'                          # å¹¿å‘ŠåŸŸå
    - 'RULE-SET,apple_domain'                             # è‹¹æœåŸŸå
    - 'GEOSITE:win-update'                                # å¾®è½¯æ›´æ–°åŸŸå
    - 'GEOSITE:sharepoint'                                # å¾®è½¯å•†ä¸šç‰ˆonedrive
    - 'GEOSITE:tailscale'                                 # tailscaleåŸŸå
    - 'GEOSITE:tracker'                                   # trackeråŸŸåï¼Œæœ€å¥½ä¸è¦åŠ ptç«™åŸŸåï¼ŒCFåŠ é€Ÿå®¹æ˜“æ— æ³•è®¿é—®
    - 'GEOSITE:synology'                                  # ç¾¤æ™–åŸŸå
    - 'GEOSITE:category-ntp'                              # NTPåŸŸå

    - '+.services.googleapis.cn'
    - '+.msftconnecttest.com'       
    - '+.msftncsi.com'        
    - 'time.*.com'        
    - '+.market.xiaomi.com'       

  default-nameserver:                                     # è§£æDNSæœåŠ¡å™¨åŸŸåçš„DNSï¼Œå¯ä»¥åŠ å¯†ä½†å¿…é¡»ä¸ºIPï¼Œå¦‚æœä¸ç”¨DNSæœåŠ¡å™¨çš„åŸŸååˆ™æ— éœ€é…ç½®
    - 223.5.5.5       
    - 223.6.6.6       
  proxy-server-nameserver:                                # è§£æä»£ç†èŠ‚ç‚¹åŸŸåçš„DNSï¼Œä¸å¡«åˆ™éµå¾ªnamepolicy
    - https://223.5.5.5/dns-query       
    - https://223.6.6.6/dns-query       
# nameseverå°½é‡ç”¨è¿è¥å•†æä¾›çš„DNS
  nameserver:                                             # å…œåº•é»˜è®¤DNSç»„ï¼Œæœªå‘½ä¸­ nameserver-policy æ—¶å¯ç”¨
    - 211.137.96.205
    - 183.221.253.100
  
  # direct-nameserver:                                    # ç”¨äº direct å‡ºå£åŸŸåè§£æçš„ DNS æœåŠ¡å™¨ï¼Œå¦‚æœä¸å¡«åˆ™éµå¾ª nameserver-policyã€nameserver å’Œ fallback çš„é…ç½®
  #   - system
  #   - 223.5.5.5
  # direct-nameserver-follow-policy: false                # æ˜¯å¦éµå¾ª nameserver-policyï¼Œé»˜è®¤ä¸ºä¸éµå®ˆï¼Œä»…å½“ direct-nameserver ä¸ä¸ºç©ºæ—¶ç”Ÿæ•ˆ
  # nameserver-policy:                                    # æŒ‡å®šåŸŸåæŸ¥è¯¢çš„è§£ææœåŠ¡å™¨ï¼Œå¯ä½¿ç”¨ geosite, ä¼˜å…ˆäº nameserver/fallback æŸ¥è¯¢
  #   'GEOSITE:category-ads-all': rcode://success         # åŒ¹é…å¹¿å‘ŠåŸŸåï¼Œè¿”å›ç©ºç»“æœ 
  #   '+.baidu.com': '114.114.114.114'                    # æŒ‡å®šç™¾åº¦åŸŸåä½¿ç”¨114DNS
  #   '+.arpa': '10.0.0.1'
  #   'RULE-SET:cn_domain':                               # æŒ‡å®šè§„åˆ™é›†ä½¿ç”¨DNS
  #   - https://doh.pub/dns-query#Proxy                   # ä½¿ç”¨DNSå¹¶èµ°ä»£ç†  
  #   - https://dns.alidns.com/dns-query#Proxy&h3=true    # ä½¿ç”¨DNSå¹¶èµ°ä»£ç†ä½¿ç”¨HTTP/3 ä½¿ç”¨#é™„åŠ ï¼Œä½¿ç”¨&è¿æ¥ä¸åŒçš„å‚æ•° é™¤äº†æŒ‡å®šä»£ç†/æ¥å£å’Œ ecsï¼Œå…¶ä½™é¡¹çš„å€¼å‡ä¸º boolï¼ˆtrue/falseï¼‰

  # fallback:                                             # è¿‡æ—¶çš„é…ç½®ï¼Œå·²è¢« nameserver-policy å–ä»£ï¼Œä½¿ç”¨æ—¶ä¼šäº§ç”ŸDNSæ³„éœ²

# å‡ºç«™ç­–ç•¥ï¼Œæ ¹æ®è‡ªå·±æƒ…å†µè°ƒæ•´æ¯ä¸ªç­–ç•¥é‡Œåˆ†ç»„æ’åºï¼Œå¢åˆ éƒ½å¯ä»¥ï¼Œæ¯”å¦‚æŠŠç¾å›½è‡ªåŠ¨æ”¾åˆ°ç¬¬ä¸€ä¸ªï¼Œæ¯”å¦‚åˆ é™¤é¦™æ¸¯æ•…è½¬ï¼Œæ³¨æ„åˆ«æ¼æ‰è¡¨æƒ…é€—å·ç­‰ã€‚
# å¦‚æœç›¸åº”åˆ†ç»„æ²¡æœ‰ç­›é€‰åˆ°å¯¹åº”çš„å›½å®¶ï¼Œè¯·æ ¹æ®è‡ªå·±èŠ‚ç‚¹åå­—è°ƒæ•´ç­›é€‰å…³é”®å­—ã€‚

######### é”šç‚¹ start #########

# è§„åˆ™ç±»å‹ç›¸å…³
# typeï¼šå¯é€‰http/file/inline  behaviorï¼šå¯é€‰domain/ipcidr/classical formatï¼šå¯é€‰yaml/text/mrs
ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
ip_list: &iplist {type: http, interval: 86400, behavior: ipcidr, format: text}
domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
class: &class {type: http, interval: 86400, behavior: classical, format: text}

# èŠ‚ç‚¹ç­›é€‰ç›¸å…³
HK: &HK '^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
TW: &TW '^(?=.*((?i)ğŸ‡¨ğŸ‡³|å°æ¹¾|(\b(TW|Tai|Taiwan)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
JP: &JP '^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|Japan)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
SG: &SG '^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
US: &US '^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|United States)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
All: &All '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|(\b(USE|USED|TOTAL|Traffic|Expire|EMAIL|Panel|Channel|Author)\b|(\d{4}-\d{2}-\d{2}|\d+G)))).*$'

# ä»£ç†ç»„ç›¸å…³
Select: &Select
  type: select
  proxies:
    - Proxy
    - HongKong
    - TaiWan
    - Japan
    - Singapore
    - America
    - AllServer
    - DIRECT

UrlTest: &UrlTest                                         # è‡ªåŠ¨é€‰æ‹©ä½å»¶è¿Ÿ
  type: url-test
  interval: 300                                           # å¥åº·æ£€æŸ¥é—´éš”
  tolerance: 600                                          # èŠ‚ç‚¹åˆ‡æ¢å®¹å·®ï¼Œå•ä½ ms
  lazy: true                                              # æ‡’æƒ°çŠ¶æ€ï¼Œé»˜è®¤ä¸ºtrue,æœªé€‰æ‹©åˆ°å½“å‰ç­–ç•¥ç»„æ—¶ï¼Œä¸è¿›è¡Œæµ‹è¯•
  url: 'http://www.gstatic.com/generate_204'
  disable-udp: false                                      # ç¦ç”¨è¯¥ç­–ç•¥ç»„çš„UDP
  timeout: 2000                                           # å¥åº·æ£€æŸ¥è¶…æ—¶ï¼Œå•ä½ms
  max-failed-times: 3                                     # å¤±è´¥æ¬¡æ•°ï¼Œè¶…è¿‡åˆ™æ‰§è¡Œä¸€æ¬¡å¼ºåˆ¶å¥åº·æ£€æŸ¥ï¼Œé»˜è®¤ 5
  hidden: true                                            # éšè—æ˜¾ç¤º åœ¨ api è¿”å›hiddençŠ¶æ€ï¼Œä»¥éšè—è¯¥ç­–ç•¥ç»„å±•ç¤º (éœ€è¦ä½¿ç”¨ api çš„å‰ç«¯é€‚é…)
  include-all-providers: true                             # æ‰€æœ‰èŠ‚ç‚¹

FallBack: &FallBack                                       # å½“å‰èŠ‚ç‚¹è¶…æ—¶æ—¶ï¼Œåˆ™ä¼šæŒ‰ä»£ç†é¡ºåºé€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨èŠ‚ç‚¹ 
  type: fallback
  interval: 300
  lazy: true
  url: 'http://www.gstatic.com/generate_204'
  disable-udp: false
  timeout: 2000
  max-failed-times: 3
  hidden: true
  include-all-providers: true

LoadBalance: &LoadBalance                                 # è´Ÿè½½å‡è¡¡ç­–ç•¥
  type: load-balance
  interval: 300
  lazy: true
  url: 'http://www.gstatic.com/generate_204'
  disable-udp: false
  strategy: consistent-hashing                            # round-robin å°†ä¼šæŠŠæ‰€æœ‰çš„è¯·æ±‚åˆ†é…ç»™ç­–ç•¥ç»„å†…ä¸åŒçš„ä»£ç†èŠ‚ç‚¹
                                                          # consistent-hashing å°†ç›¸åŒçš„ ç›®æ ‡åœ°å€ çš„è¯·æ±‚åˆ†é…ç»™ç­–ç•¥ç»„å†…çš„åŒä¸€ä¸ªä»£ç†èŠ‚ç‚¹
                                                          # sticky-sessions: å°†ç›¸åŒçš„ æ¥æºåœ°å€ å’Œ ç›®æ ‡åœ°å€ çš„è¯·æ±‚åˆ†é…ç»™ç­–ç•¥ç»„å†…çš„åŒä¸€ä¸ªä»£ç†èŠ‚ç‚¹ï¼Œç¼“å­˜ 10 åˆ†é’Ÿè¿‡æœŸ
                                                          # ç›®æ ‡åœ°å€ ä¸ºåŸŸåæ—¶ï¼Œä½¿ç”¨é¡¶çº§åŸŸååŒ¹é…
  timeout: 2000
  max-failed-times: 3
  hidden: true
  include-all-providers: true

######### é”šç‚¹ end #########

# ä»£ç†ç»„
proxy-groups: 

# æ¼ç½‘ä¹‹é±¼ æ¨èé€‰æ‹© Proxy
  - {name: Final, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png, <<: *Select, proxies: [Proxy,DIRECT]}

# èŠ‚ç‚¹åˆ‡æ¢
  - {name: Proxy, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Rocket.png, <<: *Select, proxies: [HongKong,TaiWan,Japan,Singapore,America,AllServer,DIRECT]}
  - {name: Block, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/AdBlack.png, <<: *Select, proxies: [REJECT, DIRECT]}
  - {name: banProgram, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/AdBlack.png, <<: *Select, proxies: [REJECT, DIRECT]}
  - {name: å›½å†…, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China_Map.png, <<: *Select, proxies: [DIRECT, Final]}

# ä¸šåŠ¡åˆ†æµç»„
  - {name: AI, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ChatGPT.png, <<: *Select}
  - {name: Speedtest, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Speedtest.png, <<: *Select}
  - {name: GitHub, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/GitHub.png, <<: *Select}
  - {name: YouTube, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png, <<: *Select}
  - {name: NETFLIX, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netflix.png, <<: *Select}
  - {name: Disney+, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Disney.png, <<: *Select}
  - {name: TikTok, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TikTok.png, <<: *Select}
  - {name: Bahamut, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Bahamut.png, <<: *Select, proxies: [HongKong, TaiWan]}
  - {name: bilibili, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/bilibili_3.png, <<: *Select, proxies: [DIRECT,HongKong,TaiWan]}
  - {name: Spotify, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Spotify.png, <<: *Select}
  - {name: NetEaseMusic, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netease_Music.png, <<: *Select, include-all-providers: true, filter: 'ç½‘æ˜“|éŸ³ä¹|è§£é”|Music|NetEase', proxies: [DIRECT]}
  - {name: Streaming, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Streaming.png, <<: *Select}
  - {name: Telegram, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram_X.png, <<: *Select}
  - {name: X, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/X.png, <<: *Select}
  - {name: Steam, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Steam.png, <<: *Select}
  - {name: Games, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Game.png, <<: *Select}

# æœåŠ¡åˆ†æµç»„
  - {name: Apple, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_1.png, <<: *Select}
  - {name: Google, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png, <<: *Select}
  - {name: OneDrive, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/OneDrive.png, <<: *Select}  
  - {name: Microsoft, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Windows_11.png, <<: *Select}

# åœ°åŒºèŠ‚ç‚¹ä»£ç†ç»„
  - {name: HongKong, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png, type: select, proxies: [HK-Auto, HK-FallBack, HK-LoadBalance], include-all-providers: true, filter: *HK}
  - {name: TaiWan, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China.png, type: select, proxies: [TW-Auto, TW-FallBack, TW-LoadBalance], include-all-providers: true, filter: *TW}
  - {name: Japan, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png, type: select, proxies: [JP-Auto, JP-FallBack, JP-LoadBalance], include-all-providers: true, filter: *JP}
  - {name: Singapore, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png, type: select, proxies: [SG-Auto, SG-FallBack, SG-LoadBalance], include-all-providers: true, filter: *SG}
  - {name: America, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png, type: select, proxies: [US-Auto, US-FallBack, US-LoadBalance], include-all-providers: true, filter: *US}

# å…¨éƒ¨èŠ‚ç‚¹
  - {name: AllServer, icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Airport.png, type: select, proxies: [All-Auto], <<: *use-all-proxy-providers, filter: *All}

# å»¶æ—¶ä¼˜é€‰ä»£ç†ç»„
  - {name: HK-Auto, <<: *UrlTest, filter: *HK, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: TW-Auto, <<: *UrlTest, filter: *TW, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: JP-Auto, <<: *UrlTest, filter: *JP, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: SG-Auto, <<: *UrlTest, filter: *SG, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: US-Auto, <<: *UrlTest, filter: *US, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}

# æ•…éšœè½¬ç§»ä»£ç†ç»„
  - {name: HK-FallBack, <<: *FallBack, filter: *HK, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: TW-FallBack, <<: *FallBack, filter: *TW, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: JP-FallBack, <<: *FallBack, filter: *JP, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: SG-FallBack, <<: *FallBack, filter: *SG, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: US-FallBack, <<: *FallBack, filter: *US, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}

# è´Ÿè½½å‡è¡¡ä»£ç†ç»„
  - {name: HK-LoadBalance, <<: *LoadBalance, filter: *HK, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: TW-LoadBalance, <<: *LoadBalance, filter: *TW, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: JP-LoadBalance, <<: *LoadBalance, filter: *JP, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: SG-LoadBalance, <<: *LoadBalance, filter: *SG, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}
  - {name: US-LoadBalance, <<: *LoadBalance, filter: *US, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}

# å…¨éƒ¨èŠ‚ç‚¹å»¶æ—¶ä¼˜é€‰
  - {name: All-Auto, <<: *UrlTest, filter: *All, exclude-filter: '(å…è´¹|ä¸‹è½½|ç›´è¿)'}

# include-all: true                                       å¼•å…¥æ‰€æœ‰å‡ºç«™ä»£ç†ä»¥åŠä»£ç†é›†åˆï¼Œé¡ºåºå°†æŒ‰ç…§åç§°æ’åº
# include-all-proxies: true                               å¼•å…¥æ‰€æœ‰å‡ºç«™ä»£ç†ï¼Œé¡ºåºå°†æŒ‰ç…§åç§°æ’åº
# include-all-providers: true                             å¼•å…¥æ‰€æœ‰ä»£ç†é›†åˆï¼Œé¡ºåºå°†æŒ‰ç…§åç§°æ’åº
# use: provider1:                                         å¼•å…¥ç‰¹å®šä»£ç†é›†åˆ
# filter                                                  ç­›é€‰æ»¡è¶³å…³é”®è¯æˆ–æ­£åˆ™è¡¨è¾¾å¼çš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ ` åŒºåˆ†å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼
# exclude-filter                                          æ’é™¤æ»¡è¶³å…³é”®è¯æˆ–æ­£åˆ™è¡¨è¾¾å¼çš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ ` åŒºåˆ†å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼

# è§„åˆ™åŒ¹é…
# æ­¤è§„åˆ™éƒ¨åˆ†æ²¡æœ‰åšé˜²æ³„éœ²å¤„ç†ï¼Œå› ä¸ºå¼Šä¸¥é‡å¤§äºåˆ©ï¼
rules:
#### å¯¹äºå¿…é¡»ç›´è¿è€…ç›´æ¥ä½¿ç”¨directå†™æ­»ï¼Œå…¶ä»–å°½å¯èƒ½ä½¿ç”¨ä»£ç†ç»„ä»¥æ–¹ä¾¿é¢æ¿æ§åˆ¶ä»¥åŠåˆ‡æ¢æµ‹è¯•
  # âœ… è‡ªå®šä¹‰é«˜ä¼˜å…ˆ
  - RULE-SET,wechat_domain,DIRECT
  - RULE-SET,tmdb_domain,Final                            # å½±è§†åˆ®å‰Šè®¿é—®ç¼“æ…¢ï¼Œå»ºè®®ä»£ç†
  - RULE-SET,tailscale_domain,DIRECT                      # tailscale å¿…é¡»ç›´è¿ï¼Œå¦åˆ™æ‰“æ´å¤±è´¥

  # âœ… ç§æœ‰ç½‘ç»œ/ç›´è¿è§„åˆ™/å¹¿å‘Š/æ‹¦æˆª
  - RULE-SET,private_domain,å›½å†…
  - RULE-SET,private-ip,å›½å†…,no-resolve  
  - RULE-SET,anti-ad_domain,Block
  - RULE-SET,AD_ip,Block,no-resolve
  - RULE-SET,banProgramAD_domain,banProgram

  # âœ… æµ‹é€Ÿ/æµ‹è¯•
  - RULE-SET,speedtest_domain,Speedtest
  - RULE-SET,check_class,Speedtest

  # âœ… AI ç›¸å…³æœåŠ¡ï¼ˆä¼˜å…ˆä»£ç†ï¼‰
  - RULE-SET,chatgpt_domain,AI
  - RULE-SET,claude_domain,AI
  - RULE-SET,meta_ai_domain,AI
  - RULE-SET,perplexity_domain,AI
  - RULE-SET,copilot_domain,AI
  - RULE-SET,gemini_domain,AI
  - RULE-SET,ai_domain,AI

  # âœ… å¸¸ç”¨å›½é™…æœåŠ¡
  - RULE-SET,youtube_domain,YouTube
  - RULE-SET,github_domain,GitHub
  - RULE-SET,telegram_domain,Telegram
  - RULE-SET,twitter_domain,X
  - RULE-SET,whatsapp_domain,Final
  - RULE-SET,facebook_domain,Final
  - RULE-SET,reddit_domain,Final
  - RULE-SET,google_domain,Google
  - RULE-SET,apple_domain,Apple
  - RULE-SET,onedrive_domain,OneDrive
  - RULE-SET,microsoft_domain,Microsoft

  # âœ… æµåª’ä½“æœåŠ¡
  - RULE-SET,tiktok_domain,TikTok
  - RULE-SET,netflix_domain,NETFLIX
  - RULE-SET,disney_domain,NETFLIX
  - RULE-SET,hbo_domain,NETFLIX
  - RULE-SET,spotify_domain,Spotify
  - RULE-SET,bahamut_domain,Bahamut
  - RULE-SET,biliintl_domain,Streaming
  - RULE-SET,bilibili_domain,bilibili
  - RULE-SET,neteasemusic-classical,NetEaseMusic

  # âœ… æ¸¸æˆç›¸å…³
  - RULE-SET,epic_domain,Games
  - RULE-SET,ea_domain,Games
  - RULE-SET,blizzard_domain,Games
  - RULE-SET,ubi_domain,Games
  - RULE-SET,playstation_domain,Games
  - RULE-SET,nintendo_domain,Games
  - RULE-SET,games_domain,Games

  # âœ… ä»£ç†ç±»/å…¨å±€è§„åˆ™
  - RULE-SET,geolocation-!cn,Final
  - RULE-SET,proxy_domain,Final
  - RULE-SET,global_domain,Final

  # âœ… IPç»„ é€šå¸¸ åŸŸåè§„åˆ™åº”å½“ä¼˜å…ˆäº IP è§„åˆ™/åŸŸåèƒ½æä¾›æ›´ç²¾ç¡®çš„åŒ¹é…/fake-ip æ¨¡å¼ä¾èµ–åŸŸåè§£æ
  - RULE-SET,google_ip,Google,no-resolve
  - RULE-SET,netflix_ip,NETFLIX,no-resolve
  - RULE-SET,telegram_ip,Telegram,no-resolve
  - RULE-SET,twitter_ip,X
  - RULE-SET,bilibili_ip,bilibili
  - RULE-SET,apple_ip,Apple

  # âœ… å…œåº•è§„åˆ™
  - RULE-SET,gfw_domain,Final
  - RULE-SET,steam_domain,Steam                           # Steamï¼Œé»˜è®¤ç›´è¿ï¼Œæ¢åŒºæ—¶ä¿®æ”¹æ­¤å¤„ï¼Œï¼Œæ”¾äºGFWä¹‹åå› ä¸ºåˆ›æ„å·¥åŠéœ€å§‹ç»ˆä»£ç†
  - RULE-SET,cn_domain,å›½å†…
  - RULE-SET,cn_ip,å›½å†…
  - GEOIP,cn,DIRECT
  - MATCH,Final                                           # MATCHåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œæ— éœ€æ¡ä»¶

# è¿œç¨‹è§„åˆ™é›† 
# æ•°æ®åº“åŒ¹é…GEOSITEã€GEOIPç­‰ è¯·æ±‚ä¸€æ¬¡åŒ¹é…ä¸€æ¬¡æ•°æ®åº“ ä¸å¦‚ç‰¹å®šè§„åˆ™é›†ç²¾ç®€
# mrs æ ¼å¼æ›´å¿«ã€å†…å­˜å ç”¨æ›´ä½ ç›®å‰ behavior ä»…æ”¯æŒ domain/ipcidrï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ mihomo convert-ruleset domain/ipcidr yaml/text xxx.yaml xxx.mrs è½¬æ¢å¾—åˆ°
rule-providers:
  # ğŸŸ¢ åŸºç¡€ & å›½å†…ç›¸å…³
  private_domain: {<<: *domain, path: ./ruleset/private_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs'}
  cn_domain: {<<: *domain, path: ./ruleset/cn_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs'}
  cn_ip: {<<: *ip, path: ./ruleset/cn_ip.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs'}
  private-ip: {<<: *ip, path: ./ruleset/private-ip.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs'}

  # ğŸŒ é€šç”¨ä»£ç† / å…¨çƒè§„åˆ™
  proxy_domain: {<<: *domain, path: ./ruleset/proxy_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geosite/proxy.mrs'}
  gfw_domain: {<<: *domain, path: ./ruleset/gfw_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs'}
  geolocation-!cn: {<<: *domain, path: ./ruleset/geolocation-!cn.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs'}
  global_domain: {<<: *class, path: ./ruleset/global_domain.list, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global.list'}

  # ğŸ¤– AI ç›¸å…³
  ai_domain: {<<: *domain, path: ./ruleset/ai_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-!cn.mrs'}
  chatgpt_domain: {<<: *domain, path: ./ruleset/hatgpt_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/openai.mrs'}
  gemini_domain: {<<: *domain, path: ./ruleset/gemini_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google-gemini.mrs'}
  perplexity_domain: {<<: *domain, path: ./ruleset/perplexity_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/perplexity.mrs'}
  claude_domain: {<<: *class, path: ./ruleset/claude_domain.list, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.list'}
  copilot_domain: {<<: *class, path: ./ruleset/copilot_domain.list, url: 'https://raw.githubusercontent.com/liandu2024/clash/main/list/Copilot.list'}
  meta_ai_domain: {<<: *class, path: ./ruleset/meta_ai_domain.list, url: 'https://raw.githubusercontent.com/liandu2024/clash/main/list/MetaAi.list'}

  # ğŸ”— å¸¸ç”¨ç½‘ç«™ & ç¤¾äº¤å¹³å°
  google_domain: {<<: *domain, path: ./ruleset/google_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs'}
  google_ip: {<<: *ip, path: ./ruleset/google_ip.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs'}
  github_domain: {<<: *domain, path: ./ruleset/github_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs'}
  reddit_domain: {<<: *domain, path: ./ruleset/reddit_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/reddit.mrs'}
  twitter_domain: {<<: *domain, path: ./ruleset/twitter_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/x.mrs'}
  twitter_ip: {<<: *ip, path: ./ruleset/twitter_ip.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs'}

  # ğŸ’¬ èŠå¤© & é€šè®¯
  telegram_domain: {<<: *domain, path: ./ruleset/telegram_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs'}
  telegram_ip: {<<: *ip, path: ./ruleset/telegram_ip.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs'}
  whatsapp_domain: {<<: *domain, path: ./ruleset/whatsapp_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/whatsapp.mrs'}
  facebook_domain: {<<: *domain, path: ./ruleset/facebook_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/facebook.mrs'}
  wechat_domain: {<<: *class, path: ./ruleset/wechat_domain.list, url: 'https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChat/WeChat.list'}
  
  # ğŸ¬ è§†é¢‘ & æµåª’ä½“
  youtube_domain: {<<: *domain, path: ./ruleset/youtube_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs'}
  netflix_domain: {<<: *domain, path: ./ruleset/netflix_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs'}
  netflix_ip: {<<: *ip, path: ./ruleset/netflix_ip.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs'}
  disney_domain: {<<: *domain, path: ./ruleset/disney_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/disney.mrs'}
  hbo_domain: {<<: *domain, path: ./ruleset/hbo_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/hbo.mrs'}
  spotify_domain: {<<: *domain, path: ./ruleset/spotify_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.mrs'}
  tiktok_domain: {<<: *domain, path: ./ruleset/tiktok_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs'}
  bahamut_domain: {<<: *domain, path: ./ruleset/bahamut_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bahamut.mrs'}
  tmdb_domain: {<<: *domain, path: ./ruleset/tmdb_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tmdb.mrs'}
  neteasemusic-classical: {<<: *class, path: ./ruleset/neteasemusic.list, url: 'https://raw.githubusercontent.com/Coldvvater/Mononoke/master/Clash/Rules/NetEaseMusic.list'}
  bilibili_domain: {<<: *domain, path: ./ruleset/bilibili_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs'}
  bilibili_ip: {<<: *ip, path: ./ruleset/bilibili_ip.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/bilibili.mrs'}
  # å“”å“©å“”å“©ä¸œå—äºš
  biliintl_domain: {<<: *domain, path: ./ruleset/biliintl_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/biliintl.mrs'}

  # ğŸ›’ å•†ä¸š & æ”¯ä»˜
  paypal_domain: {<<: *domain, path: ./ruleset/paypal_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/paypal.mrs'}
  amazon_domain: {<<: *domain, path: ./ruleset/amazon_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/amazon.mrs'}

  # ğŸ’» ç§‘æŠ€å…¬å¸ & äº‘æœåŠ¡
  microsoft_domain: {<<: *domain, path: ./ruleset/microsoft_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs'}
  onedrive_domain: {<<: *domain, path: ./ruleset/onedrive_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs'}
  apple_domain: {<<: *domain, path: ./ruleset/apple_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.mrs'}
  apple_ip: {<<: *ip, path: ./ruleset/apple_ip.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/apple.mrs'}
  tailscale_domain: {<<: *domain, path: ./ruleset/tailscale_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tailscale.mrs'}

  # ğŸ® æ¸¸æˆå¹³å°
  steam_domain: {<<: *domain, path: ./ruleset/steam_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/steam.mrs'}
  blizzard_domain: {<<: *domain, path: ./ruleset/blizzard_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/blizzard.mrs'}
  epic_domain: {<<: *domain, path: ./ruleset/epic_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/epicgames.mrs'}
  ea_domain: {<<: *domain, path: ./ruleset/ea_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ea.mrs'}
  ubi_domain: {<<: *domain, path: ./ruleset/ubi_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ubisoft.mrs'}
  playstation_domain: {<<: *domain, path: ./ruleset/playstation_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/playstation.mrs'}
  nintendo_domain: {<<: *domain, path: ./ruleset/nintendo_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/nintendo.mrs'}
  games_domain: {<<: *domain, path: ./ruleset/games_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-games.mrs'}

  # ğŸš« å¹¿å‘Šå±è”½ & å…¶ä»–
  anti-ad_domain: {<<: *domain, path: ./ruleset/anti-ad_domain.mrs, url: 'https://raw.githubusercontent.com/privacy-protection-tools/anti-ad.github.io/master/docs/mihomo.mrs'}
  AD_ip: { <<: *iplist, path: ./ruleset/AD_ip.list, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/ad.list'}
  banProgramAD_domain: {<<: *class, path: ./ruleset/banProgramAD_domain.list, url: 'https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanProgramAD.list'}
  speedtest_domain: { <<: *domain, path: ./ruleset/speedtest_domain.mrs, url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs'}
  check_class: { <<: *class, path: ./ruleset/check_class.list, url: 'https://raw.githubusercontent.com/BSakura-Miku/clash/refs/heads/BSakura-Miku-patch-1/list/Check.list'}
  
hosts:
  pve.lan:
    - 10.10.2.9